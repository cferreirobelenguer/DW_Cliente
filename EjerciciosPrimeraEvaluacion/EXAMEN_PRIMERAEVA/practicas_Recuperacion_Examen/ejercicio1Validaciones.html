<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio se sesión</title>
</head>
<body>
    <img src="personas.jpg" width="400" height="300" id="foto">
    <form>
        <p>
            <label for="">Usuario: </label>
            <input type="text" name="nombre">
        </p>
        <p>
            <label for="">Contraseña</label>
            <input type="text" name="contra">
        </p>
        <p>
            <label for="">Volver a introducir contraseña</label>
            <input type="text" name="contraRepe">
        </p>
        <input type="button" id="registro" value="Registrarse" onclick="registrar();">
        <input type="button" id="borrar" value="Cancelar" onclick="cancelar();">
    </form>
    <script>
        //Variables globales de nombre
        var min=false;
        var registroNombre=false;
        var registroContra=false;
        var usuario="";
        //Variables globales de contraseña
        var numeros="0123456789";
        var caracterEspe=",.-;:_´ç¨Ç{}`+^*[]ªª!·$%&/()=?¿¡'";
        var mayusculas="ABCDEFGHIJKLMNÑOPQRSTUVWXYZ";
        var minusculas="abcdefghyjklmnñopqrstuvwxyz";
        var min=false;
        var mayus=false;
        var caracter=false;
        var numero=false;
        var contra="";
        //Variables globales de contraseña repetida
        var registroRepe=false;
        var contraRepe="";

        function validarNombre(){
            //Función para validar nombre
        
            usuario=document.getElementsByName("nombre")[0].value;
            
            for(let i=0;i<usuario.length;i++){
                let caracter=usuario.charAt(i);
                if(caracter==caracter.toLowerCase()){
                    min=true;
                    registroNombre=true;
                }
            }
    
            
            if((usuario!="")&&(min==false)){
                limpiar();
                alert("Nombre dede ser minúscula");
                return false;
            }
        }
        function validarContra(){
            

            //Función para validar contraseña
            contra=document.getElementsByName("contra")[0].value;
            
            if(contra.length<5){
                alert("La contraseña debe tener 5 o más caracteres");
                limpiar();
                return false;
            }else{
                for(let i=0;i<contra.length;i++){
                    if(numeros.includes(contra.charAt(i))==true){
                        numero=true;
                    }
                    if(caracterEspe.includes(contra.charAt(i))==true){
                        caracter=true;
                    }
                    if(mayusculas.includes(contra.charAt(i))==true){
                        mayus=true;
                    }
                    if(minusculas.includes(contra.charAt(i))==true){
                        min=true;
                    }
                    
                }
            
                if(numero!=true){
                    alert("La contraseña debe tener al menos un número");
                    limpiar();
                    registroNumero=false;
                    return false;
                }else{
                    registroNumero=true;
                }
                if(caracter!=true){
                    alert("La contraseña debe tener al menos un caracter especial");
                    limpiar();
                    registroCaracter=false;
                    return false;
                }else{
                    registroCaracter=true;
                }
                if(min==false){
                    alert("La contraseña debe tener al menos una minúscula");
                    limpiar();
                    registroMin=false;
                    return false;
                }else{
                    registroMin=true;
                }
                if(mayus==false){
                    alert("La contraseña debe tener al menos una mayúscula");
                    limpiar();
                    registroMayus=false;
                    return false;
                }else{
                    registroMayus=true;
                }
            }
            contraRepe=document.getElementsByName("contraRepe")[0].value;
            if(contra==contraRepe){
                registroRepe=true;
                console.log("Registro repe " +registroRepe)
            }else{
                registroRepe==false;
                alert("Ambas contraseñas deben ser iguales");
                limpiar();
                return false;
            }

            if((registroCaracter==true)&&(registroNumero==true)&&(registroMin==true)&&(registroMayus==true)&&(registroRepe==true)){
                registroContra=true;
            }
        }
        function registrar(){
            validarNombre();
            validarContra();
            console.log(registroNombre);
            console.log(registroContra);
            if((registroNombre==true)&&(registroContra==true)){
                alert("Datos registrados correctamente");
            }
        }
        function limpiar(){
            //  Se limpian las cajas
            document.getElementsByName("nombre")[0].value="";
            document.getElementsByName("contra")[0].value="";
            document.getElementsByName("contraRepe")[0].value="";
        }
        function cancelar(){
            //Se cancela el registro de datos, limpiando ventanas y mostrando mensaje
            limpiar();
            alert("Se ha interrumpido el proceso de registro de datos");
            
        }

    </script>
</body>
</html>
